# my-seckill
实现一个秒杀系统

# 秒杀系统
一个简单的秒杀系统包括以下几个主要元素：活动开始结束时间、稀缺商品、投入的库存。简单的场景就是用户在商品详情页抢购，进入结算页，最后下单。
如果有其他的额外情况，比如：
1. 希望知道活动会吸引的用户量级好做好准备，可以提前上线一个预约系统，让用户预约一段时间，后面只有预约的用户可以参与抢购
2. 希望优质的用户才能参加抢购，就可以联合其他团队比如风控对用户进行筛选，过滤黄牛或不良行为的用户
3. 希望更多用户参加，可以让用户邀请好友，邀请多的可以抢购多个等等

流程看起来并不复杂，但是完成这么一个系统会面临以下等常见的挑战：
1. 巨大瞬时流量
2. 热点数据问题
3. 刷子流量

通常来说，一次HTTP请求的链路如下：
1. DNS域名解析
2. Nginx负载均衡
3. Web服务
4. RPC调用

经过一层一层的调用，筛选的流量会越来越细，都是优质请求。在这个链路中，一般会在DNS层做一些网络攻防（网络安全的配置等），拦截部分攻击请求；
Nginx由于本身比较强大，不仅可以做反向代理、负载均衡，也适合做大流量的web服务器、静态资源服务器等；web这一层基本就是流量的控制、业务端数据的聚合等；
最后到基础服务的RPC调用时，流量相对来说就不那么大了。

综上所述，项目的整体架构是nginx -> web -> rpc，静态资源放到CDN中，nginx来做web网关、部分业务校验（通过OpenResty(lua+nginx)来做）、黑白名单、限流等，至于web和rpc，就采用SpringMVC+Dubbo+MySQL+Redis






























